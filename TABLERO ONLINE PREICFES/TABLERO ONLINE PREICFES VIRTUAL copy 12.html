<!DOCTYPE html>
<html>
<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    <title>Pizarra en L√≠nea con Diapositivas de Im√°genes</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
    <!-- Agrega Font Awesome para los √≠conos -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css">

<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/interact.js/1.9.20/interactjs/interact.min.css">

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/interact.js/1.9.20/interactjs/interact.min.js"></script>
<script src="script.js"></script>

<!-- Agrega esto en el encabezado de tu documento HTML -->
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>



<style>


/* INICIO DE FONDO DE PANTALLA*/


body {
            margin: 0;
            padding: 0;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            font-family: Arial, sans-serif;
            color: #333;
            background-image: url('https://mxcity.mx/wp-content/uploads/2022/06/gran-bosque-de-agua.jpeg'); /* Ruta de la imagen de fondo */
       
        }


body {
        background-image: url('https://cdn.pixabay.com/photo/2018/04/06/00/25/trees-3294681_640.jpg'); /* Ruta de la imagen de fondo */
        background-size: cover; /* Ajusta el tama√±o de la imagen para cubrir todo el fondo */
        background-repeat: no-repeat; /* Evita la repetici√≥n de la imagen */
        background-attachment: fixed; /* Fija la imagen en su lugar mientras se desplaza la p√°gina */
    }
    

        
        .contenido {
            padding: 20px;
            text-align: center;
        }

        #fileInput {
            display: none;
        }
          
/* FINAL DE FONDO DE PANTALLA*/


/* Estilo del bot√≥n "Mostrar Panel" */
#showPanelButton {
    background-color: #3498db;
    color: #fff;
    border: none;
    padding: 10px;
    margin: 10px;
    cursor: pointer;
    font-size: 20px;
    border-radius: 5px;
}

/* Estilo del panel de control */
#controlPanel {
    background-color: #efefef;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
    position: absolute;
    top: 50px; /* Ajusta la posici√≥n vertical seg√∫n tu dise√±o */
    right: 10px; /* Ajusta la posici√≥n horizontal seg√∫n tu dise√±o */
    padding: 10px;
    display: none; /* Inicialmente oculto */
}
/* Estilo del bot√≥n "Anterior" */
#previousButton {
    background-color: #117e61;
}

/* Estilo del bot√≥n "Siguiente" */
#nextButton {
    background-color: #117e61;

}

/* Estilo del bot√≥n "Limpiar" */
#clearButton {
    background-color: #ac3333;
}

/* Estilo del bot√≥n "Guardar" */
#saveButton {
    background-color: #9e07cd;
}

/* Estilo del bot√≥n "Deshacer" */
#undoButton {
    background-color: #ab4444;
}

/* Estilo del bot√≥n "Rehacer" */
#redoButton {
    background-color: #ab4444;
}



/* Estilo del bot√≥n "Borrar Trazos" */
#clearDrawingButton {
    background-color: #bc9a03; /* Color de fondo del bot√≥n (puedes cambiarlo) */
    margin-bottom: 15px;
    margin-top: 12px;

}*


/* Estilo del bot√≥n de carga de imagen */
#imageInput {
    background-color: #117e61;
    color: #fff;
    border: none;
    padding: 10px 20px;
    margin: 5px;
    cursor: pointer;
    transition: background-color 0.3s;
    font-size: 12px;
    border-radius: 5px;
    display: inline-block;
    margin-top: 10px; /* Ajusta el margen superior seg√∫n tus necesidades */
}


/* Estilo del bot√≥n de carga de imagen en hover */
#imageInput:hover {
    background-color: #2980b9;
}

/* Estilo de los botones ovalados */
button {
    background-color: #3498db;
    color: #fff;
    border: none;
    padding: 10px 20px;
    margin: 5px;
    cursor: pointer;
    transition: background-color 0.3s;
    font-size: 16px;
    border-radius: 25px; /* Valor alto para hacer que los botones sean ovalados */
}


    #timerDisplay {
    position: fixed;
    top: 16%;
    left: 50%;
    transform: translate(100%, -180%);
    text-align: left;
    font-size: 25px; /* Ajusta el tama√±o del texto seg√∫n tus preferencias */
}






/* Estilo del texto dentro del contenedor */
#textoContenedor p {
    font-size: 28px;
    color: #333;
    font-weight: bold;
    /* No es necesario centrar verticalmente ya que el contenedor se ajusta autom√°ticamente */
}


    #textoContenedor {
        background-color: #ffffff;
        padding: 10px;
        margin-top: 10px;
        margin-bottom: 10px;
        border: 1px solid #ccc;
        text-align: center;
        /* Centra el texto horizontalmente */
        position: relative; /* Permite posicionar elementos hijos relativos a este contenedor */
    }

    #logoContainer {
        position: absolute;
        top: 0; /* Ajusta la posici√≥n vertical seg√∫n tu dise√±o */
        right: 0; /* Coloca el logotipo en el lado derecho del contenedor */
    }

    #logoContainer img {
        width: 300px; /* Ajusta el ancho del logotipo seg√∫n tus necesidades */
        height: auto; /* Mantiene la proporci√≥n original */
    }



    #showPanelButton {
    position: absolute; /* Aseg√∫rate de que el bot√≥n tenga una posici√≥n absoluta o fija */
    top: 10px; /* Ajusta la posici√≥n vertical seg√∫n tu dise√±o */
    right: 10px; /* Ajusta la posici√≥n horizontal seg√∫n tu dise√±o */
    /* Resto de tus estilos... */
}

#controlPanel {
    position: absolute;
    top: 50px; /* Ajusta la posici√≥n vertical seg√∫n tu dise√±o */
    right: 10px; /* Ajusta la posici√≥n horizontal seg√∫n tu dise√±o */
    display: none;
    /* Resto de tus estilos... */
}



/* Estilo del selector de color */
#colorPicker {
    width: 30px; /* Cambia el valor del ancho seg√∫n tus preferencias */
    margin-bottom: 25px; /* Ajusta el margen inferior seg√∫n tus necesidades */
    margin-top: 15px;
}



/* Estilo para el rango de tama√±o del pincel */
#brushSizeInput {
    width: 130px; /* Modifica el ancho a tu preferencia */
    margin-bottom: 40px; /* A√±ade un margen en la parte inferior para separarlo de otros elementos */
    margin-top: 0px;
}



 
/* Estilo del bot√≥n "Elegir un Nombre al Azar" */
#pickRandomStudentButton {
    background-color: #3498db;
    color: #fff;
    border: none;
    padding: 10px 20px;
    margin: 10px;
    cursor: pointer;
    font-size: 16px;
    border-radius: 50px;
    font-weight: bold; /* Texto en negrita */
}

/* Estilo del resultado del nombre al azar */
#randomStudentResult {
    font-size: 35px;
    color: #333;
    margin: 10px;
    text-align: center;
    font-weight: bold; /* Texto en negrita */
}

/* Estilo del contenedor ESTUDIANTE AL AZAR */
#studentContainer {
    background-color: #f2f2f2;
    padding: 20px;
    border: 1px solid #ccc;
    border-radius: 10px;
    margin: 20px;
}

/* Estilo del p√°rrafo dentro del contenedor*/
#studentContainer p {
    font-weight: bold; /* Texto en negrita */
    margin-bottom: 10px;
    color: #ffffff; /* Cambia el color  que desees */
}

/* Estilo del textarea dentro del contenedor */
#studentNamesInput {
    width: 10%;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
    margin-bottom: 10px;
}

/* Estilo de los botones dentro del contenedor */
#studentContainer button {
    background-color: #3498db;
    color: #fff;
    border: none;
    padding: 10px 20px;
    cursor: pointer;
    font-size: 16px;
    border-radius: 5px;
    margin-right: 10px;
}

/* Estilo del bot√≥n "Elegir un Nombre al Azar" */
#pickRandomStudentButton {
    background-color: #117e61; /* Cambia el color si deseas */
}

.upload-text {
    color: #fff; /* Cambia el color del texto a blanco */
}




/* CARGAR IM√ÅGENES */

.upload-label {
    color: #02f6fa; /* Cambia el color del texto */
    margin-top: 13px; /* Ajusta el margen superior seg√∫n tus necesidades */
}

.upload-label i {
    font-size: 24px; /* Ajusta el tama√±o seg√∫n tus preferencias */
    margin-left: 16px; /* Agrega un margen a la derecha del primer √≠cono para separarlos */
}


  /* Estilo del √≠cono al pasar el mouse sobre √©l (hover) */
  .upload-label:hover i {
        color: #f9e104; /* Cambia el color al pasar el mouse sobre el √≠cono */
    }
/* .................................................... */

    
/* CRON√ìMETRO DEL PANEL DE CONTROL " */
#startTimerButton {
    background-color: #016fb9;
}

/* Estilo del bot√≥n "Reiniciar Cron√≥metro" */
#resetTimerButton {
    background-color: #9d3501;
}


/* Estilos para el campo de entrada de tiempo */
#timerInput {
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
    font-size: 16px;
    width: 150px; /* Ajusta el ancho seg√∫n tus preferencias */
    margin-right: 10px;
}


#startTimer {
    background: none;
    border: none;
    font-size: 24px;
    margin-right: 10px; /* Espacio entre el bot√≥n y otros elementos */
    cursor: pointer; /* Cambia el cursor al pasar por encima */
    color: #02f6fa; /* Color del icono */
}

#startTimer:hover {
    color: #f9e104; /* Cambia el color del icono al pasar el cursor por encima */
}


#pauseTimer, #resetTimer {
    background: none;
    border: none;
    font-size: 24px;
    margin-right: 10px; /* Espacio entre los botones y otros elementos */
    cursor: pointer; /* Cambia el cursor al pasar por encima */
    color: #02f6fa; /* Color del icono */
}

#pauseTimer:hover, #resetTimer:hover {
    color: #f9e104; /* Cambia el color del icono al pasar el cursor por encima */
}


#timer {
    font-size: 24px; /* Tama√±o de fuente del temporizador */
    color: #333; /* Color del texto */
    background-color: transparent; /* Fondo transparente */
    padding: 10px; /* Espaciado interno para el contenido */
    border: 1px solid #ccc; /* Borde alrededor del temporizador */
    border-radius: 5px; /* Borde redondeado */
    text-align: center; /* Alineaci√≥n del texto en el centro */
    width: 180px; /* Ancho del temporizador (ajusta seg√∫n tus necesidades) */
    text-align: center; /* Para centrar horizontalmente */
    margin: 0 auto; /* Margen autom√°tico a la izquierda y derecha para centrar */
    position: absolute; /* Posici√≥n absoluta para permitir el arrastre */
    cursor: move; /* Cursor de agarre para indicar que se puede arrastrar */
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    display: none; /* Oculta el temporizador por defecto */

}

/* ::::::::::::::::::::::::::::::::::::::::::::::::::::::::: */



/* TEXTO DISPLAY TIMER*/
#timer {
    font-size: 22px; /* Tama√±o de fuente */
    font-weight: bold; /* Texto en negrita */
    color: #ffffff; /* Color del texto */
}

#minutes,
#seconds {
    background-color: #03e2fb; /* Color de fondo de los d√≠gitos */
    color: #000000; /* Color del texto de los d√≠gitos */
    padding: 5px 10px; /* Espaciado alrededor de los d√≠gitos */
    border-radius: 12px; /* Bordes redondeados de los d√≠gitos */
    font-weight: bold; /* Texto en negrita */
    font-size: 28px;
}

#minutes, #seconds {
    margin: 0 5px; /* Agrega un espacio de 5px a la izquierda y a la derecha de los d√≠gitos */
}

#timerDisplay {
    position: fixed;
    top: 16%;
    left: 50%;
    transform: translate(100%, -180%);
    text-align: left;
    font-size: 25px; /* Ajusta el tama√±o del texto seg√∫n tus preferencias */
}

#timer span {
    font-weight: bold;
    margin: 0 5px;
}

#timer.time-up {
    background-color: #ff6b6b; /* Cambia el color de fondo cuando el tiempo se agota */
    color: white;
}


/* TIMER*/

#timerInput {
    font-size: 20px;
    cursor: pointer; /* Cambia el cursor al pasar por encima */
    color: #02f6fa; /* Color del √≠cono */
    background-color: #000; /* Color de fondo del campo de entrada */
    padding: 5px 10px; /* Espaciado interno para el contenido */
    border: 1px solid #ccc; /* Borde alrededor del campo de entrada */
    border-radius: 5px; /* Borde redondeado */
    margin-right: 16px; /* Espacio entre el campo de entrada y otros elementos */
    width: 50px; /* Ancho del campo de entrada (ajusta seg√∫n tus necesidades) */
    text-align: center; /* Alineaci√≥n del texto en el centro */
    font-weight: bold; /* Agrega negrita al texto */
    width: 65px; /* Establece el ancho del placeholder */
    height: 25px; /* Establece la altura del placeholder */
    margin-top: 6px;
}

#timerInput::after {
    content: " (s)"; /* Agrega "(s)" despu√©s del contenido del campo de entrada */
}

#timerInput:hover {
    color: #fffb00; /* Cambia el color del √≠cono al pasar el cursor por encima */
    background-color: #333; /* Cambia el color de fondo al pasar el cursor por encima */
}

/* PLACE HOLDER INTERIOR */
#timerInput {
    font-size: 24px;
    cursor: pointer; /* Cambia el cursor al pasar por encima */
    color: #fffb00; /* Color del √≠cono */
    margin-right: 10px; /* Espacio entre el campo de entrada y otros elementos */
    margin-left: 850px;
}

#timerInput:hover {
    color: #02f6fa; /* Cambia el color del √≠cono al pasar el cursor por encima */
}





#transitionDuration {
        font-size:20px;
        cursor: pointer;
        color: #ffffff;
        background-color: #000000;
        padding: 5px 10px;
        border: 1px solid #ccc;
        border-radius: 5px;
        margin-right: 10px;
        width: 50px;
        text-align: center;
        font-weight: bold; /* Agrega negrita al texto */
    }


/* CONTENEDOR MEN√ö - L√ÅPIZ*/
.draggable-container {
    position: absolute;
    top: 35px; /* Ajusta seg√∫n sea necesario */
    left: 40px; /* Ajusta seg√∫n sea necesario */
    cursor: move;
}

.menu-icon {
    background-color: #02f6fa;
    border: 1px solid #ccc;
    border-radius: 50%;
    padding: 10px;
    cursor: pointer;
}

.menu-content {
    position: absolute;
    background-color: rgba(0, 0, 0, 0); /* Ajusta el √∫ltimo valor para cambiar la opacidad */
    color: #ffffff; /* Cambia este valor al color deseado para el texto */
    border: 0px solid #ccc;
    padding: 10px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0);
    
    
}





/* MEN√ö L√ÅPIZ HORIZONTAL */

/* Estilo del bot√≥n de pantalla completa y men√∫-l√°piz */
.menu-icon {
    background-color: #3498db; 
    color: #fff;
    border: 1px solid #ccc;
    padding: 10px;
    cursor: pointer;
    font-size: 13px;
    border-radius: 5px;
    margin-right: 10px;
}



.menu-icon:hover {
    background-color: #035c97;
}





.menu-content {
    position: absolute;
    background-color: rgba(0, 0, 0, 0);
    color: #ffffff;
    border: 0px solid #ccc;
    padding: 10px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0);
    display: none;
}

/* Hace que el contenido del men√∫-l√°piz sea horizontal */
.menu-content div {
    display: flex;
}

/* Asegura que los botones dentro del men√∫-l√°piz tengan un estilo similar */
.menu-content button {
    background-color: #3498db;
    color: #fff;
    border: none;
    padding: 5px;
    cursor: pointer;
    font-size: 16px;
    border-radius: 25px;
    margin-right: 10px;
}

.menu-content button:hover {
    background-color: #2980b9;
}




/* Estilo para el rango de tama√±o del pincel */
#brushSizeInput {
    width: 100px; /* Modifica el ancho a tu preferencia */
    margin-bottom: 0px; /* A√±ade un margen en la parte inferior para separarlo de otros elementos */
}



/* SELECTOR DE COLOR FONDO */
#colorSelector {
    width: 30px;
    height: 30px;
    border-radius: 50%;
    border: 1px solid #ccc;
    cursor: pointer;
    position: relative;
    z-index: 2; /* Asegura que est√© encima de otros elementos */
    display: inline-block; /* Asegura que ocupe solo el espacio necesario */
}



.file-upload-container {
        display: flex;
        align-items: center;
    }

    #coloresFondoPredefinidos {
        display: flex;
        flex-direction: row;
        align-items: center;
        margin-right: 10px; /* Espacio a la derecha de los colores predefinidos */
    }

    .colorSquare {
        width: 30px;
        height: 30px;
        margin-right: 5px;
        cursor: pointer;
    }

    #colorInput {
        margin-right: 5px; /* Mismo espacio que los colores predefinidos */
    }

    #clearButton {
        margin-right: 0px; /* Mismo espacio que los colores predefinidos */
    }



/* Estilo adicional para la barra de herramientas en pantalla completa */
#toolsMenu {
    position: absolute;
    background-color: transparent;
    padding: 10px;
    border-radius: 5px;
    display: none;
    z-index: 999;
  }

  #toolsMenu button {
    margin-right: 5px;
  }

  /* Estilo adicional para la barra de herramientas en pantalla completa */
  #toolsMenu.fullscreen {
    position: fixed;
    bottom: 10px;
    left: 10px;
  }


/* -- CONTENEDOR FLOTANTE PDF - PPTX Y FULL SCREEN */
  .file-upload-container {
    display: flex;
    margin-top: 28px; /* Ajusta el margen superior seg√∫n tus necesidades */
    text-align: left; /* Centra el contenido del contenedor horizontalmente */
    margin-left: 40px; /* Ajusta el margen izquierdo seg√∫n tus necesidades */
}


#eraseButton {
    background-color: transparent;; /* Color de fondo del bot√≥n (puedes cambiarlo) */
    color: #02f6fa; /* Color del texto del bot√≥n (puedes cambiarlo) */
    border: #000000;
    padding: 10px;
    cursor: pointer;
    font-size: 22px;
    border-radius: 50px; /* Valor alto para hacer que el bot√≥n sea redondo */
    margin-right: 0px; /* Ajusta el margen derecho seg√∫n tus necesidades */
}

#eraseButton:hover {
    background-color: #035c97; /* Cambia el color de fondo al pasar el mouse sobre el bot√≥n #035c97 */
}




/*CONTENEDOR BORRADOR*/
.container-borrador {
    position: fixed;
    bottom: 10px; /* Ajusta la distancia desde la parte inferior seg√∫n tus necesidades */
    right: 10px; /* Ajusta la distancia desde la derecha seg√∫n tus necesidades */
    background-color: transparent; /* Color de fondo del contenedor */
    border: 0px solid transparent; /* Borde del contenedor */
    border-radius: 5px; /* Bordes redondeados del contenedor */
    padding: 10px; /* Espaciado interno del contenedor */
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.2); /* Sombra del contenedor */
    z-index: 999; /* Ajusta la propiedad z-index para que est√© encima de otros elementos */
    
   
}






.upload-label i {
        /* Estilos para el √≠cono de carga */
        margin-left: 0px; /* Ajusta el margen a la izquierda seg√∫n tus necesidades */
    }



    #fullScreenButton {
    background-color: transparent;
    border: none;
    color: #02f6fa; /* Cambia este valor al color deseado para el √≠cono */
    font-size: 16px;
    cursor: pointer;
    margin-right: 10px; /* Ajusta el margen seg√∫n sea necesario */
    margin-left: 30px; /* Ajusta el margen a la izquierda seg√∫n tus necesidades */
}

#fullScreenButton:hover {
    color: #f9e104; /* Cambia este valor al color deseado cuando pasas el mouse sobre el bot√≥n */
}

#fullScreenButton i {
    font-size: 22px; /* Ajusta el tama√±o del √≠cono seg√∫n sea necesario */
    margin-left: 10px; /* Ajusta el margen a la izquierda seg√∫n tus necesidades */
}


/*  PDF */


#pdfViewer {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 20px;
            border: 2px solid #333;
            min-width: 400px;
            min-height: 400px;
            overflow: hidden;
            z-index: 2;
        }

        #pdfFrame {
            width: 100%;
            height: 100%;
            border: none;
        }

        /* Estilo para el t√≠tulo de la ventana emergente */
        #pdfViewerTitle {
            cursor: grab;
            padding: 25px;
            background-color: #024479;
            color: white;
            user-select: none;
            position: relative;
        }

        /* Estilo para la esquina de ajuste */
        #resizeCorner {
            position: absolute;
            width: 20px;
            height: 20px;
            background-color: #fd8700;
            bottom: 0;
            right: 0;
            cursor: nwse-resize;
        }


        /* Estilo del bot√≥n para abrir el input de subida de PDF */
        #pdfViewer button {
            background-color: #3498db;
            color: #fff;
            padding: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        #pdfViewer button:hover {
            background-color: #2980b9;
        }


/* FINAL PDF */



/* BOTONES DEL MEN√ö - L√ÅPIZ Y DE LA PARTE BAJA*/
#uploadButton, #prevButton, #resetButton, #pdfButton, #clearButton, #saveButton, #clearDrawingButton, #undoButton, #redoButton, #previousButton, #nextButton {
    background: none;
    border: none;
    font-size: 20px;
    margin-right: 10px; /* Espacio entre los botones y otros elementos */
    cursor: pointer; /* Cambia el cursor al pasar por encima */
    color: #02f6fa; /* Color del icono */
    margin-right: 0px;
}

#uploadButton:hover, #prevButton:hover, #resetButton:hover, #pdfButton:hover, #saveButton:hover, #clearDrawingButton:hover, #undoButton:hover, #redoButton:hover, #previousButton:hover, #nextButton:hover {
    color: #f9e104; /* Cambia el color del icono al pasar el cursor por encima */
}

#resetButton {
    background: none;
    border: none;
    font-size: 20px;
    margin-right: 10px; /* Espacio entre los botones y otros elementos */
    cursor: pointer; /* Cambia el cursor al pasar por encima */
    color: #2ff801; /* Color del icono */
    margin-right: 0px;
}

#resetButton:hover, #clearButton:hover {
    color: #ff0000; /* Cambia el color del icono al pasar el cursor por encima */
}

#clearButton:hover {
    color: #ffe600; /* Cambia el color del icono al pasar el cursor por encima */
}

/* .....................................*/



/*::::::::::::::::::::::::::::::::::::::::::::*/










</style>


</head>



<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/4.5.0/fabric.min.js"></script>
<script src="script.js"></script>
<!-- Scripts JavaScript y Fabric.js -->





<body>




    <!-- DISPLAY CUENTA REGRESIVA-->
    <div id="timer" style="display: none;">
        Tiempo restante: <br><br><span id="minutes"></span>:<span id="seconds"></span>
    </div>




    <!-- CONTENEDOR FLOTANTE PDF - PPTX Y FULL SCREEN -->
    <div class="file-upload-container">
          <!-- full screen -->
          

          <button id="fullScreenButton" onclick="toggleFullScreen()"><i class="fas fa-expand"></i></button>

       

</div>


       
   </div> 



 


    <!-- CONTENEDOR L√ÅPIZ Y BORRADOR -->
    <div class="container-borrador">
      

            <input type="color" id="colorPicker">


 <!-- Input para subir imagen -->
 <input type="file" id="imagenInput" style="display: none">







            <!-- Rango de tama√±o del pincel -->
            <input type="range" id="brushSizeInput" min="1" max="10" value="1">
            

            <!-- Bot√≥n para activar el modo de borrado de trazos espec√≠ficos -->
            <button id="eraseButton"><i class="fas fa-eraser"></i></button>

            
            <button id="undoButton"><i class="fas fa-undo"></i></button>
            <button id="redoButton"><i class="fas fa-redo"></i></button>

            <button id="clearButton"><i class="fas fa-trash"></i></button>

  
    </div> 





 <!-- MEN√ö DE LA BARRA DE HERRAMIENTAS √çCONO L√ÅPIZ -->
 <div id="toolsContainer" class="draggable-container">
    <div id="pencilIcon" class="menu-icon" onclick="toggleMenu()">
        <i class="fas fa-sliders-h"></i>


    </div>

    <div id="toolsMenu" class="menu-content" style="display: none;">
        <div>
          

    
    
        <!-- BORRAR TODOS LOS TRAZOS-->
       <button id="clearDrawingButton"><i class="fas fa-trash"></i></button>
       
        <!-- CAPTURA DE PANTALLA-->
       <button id="saveButton"><i class="fas fa-camera"></i></button>

       
       
      

       <!-- NAVEGACI√ìN DE IM√ÅGENES -->
       <button id="previousButton"><i class="fas fa-chevron-left"></i></button>
       <button id="nextButton"><i class="fas fa-chevron-right"></i></button>

         <!-- SUBIR IM√ÅGENES -->
      <input type="file" id="imageInput" accept="image/*" multiple style="display: none;">
      <label for="imageInput" class="upload-label">
      <i class="fas fa-upload"></i>
      </label>

         <!-- TIMER -->
         <input type="text" id="timerInput" placeholder="Tiempo (segundos)">
         <button id="startTimer"><i class="fas fa-clock"></i></button>
         <button id="pauseTimer"><i class="fas fa-pause"></i></button>
         <button id="resetTimer"><i class="fas fa-sync"></i></button>
      
    
     

        </div>
    </div>

</div>
 

<!-- TAMA√ëO DEL LIENZO -->
<div id="lienzoContainer">
    <canvas id="whiteboard" width="1330" height="1200"></canvas>


    
    
   
  </div>
  
  

<!-- CONTENEDOR FLOTANTE PARTE BAJA  -->
<div class="file-upload-container">
    <div>
        <!-- Men√∫ de colores predefinidos -->
        <div id="coloresFondoPredefinidos">
            <!-- Colores para cambiar el fondo -->
            <div class="colorSquare" style="background-color: #8d8d8d;" onclick="cambiarColorFondo('#8d8d8d')"></div>
            <div class="colorSquare" style="background-color: #3c573e;" onclick="cambiarColorFondo('#3c573e')"></div>
            <div class="colorSquare" style="background-color: #107c8a;" onclick="cambiarColorFondo('#107c8a')"></div>
            <div class="colorSquare" style="background-color: #635400;" onclick="cambiarColorFondo('#635400')"></div>
            <div class="colorSquare" style="background-color: #000000;" onclick="cambiarColorFondo('#000000')"></div>

            <!-- Input de color -->
            <input type="color" id="colorInput" onchange="cambiarColorFondo(this.value)">
        </div>
    </div>

            <!-- Bot√≥n Clear -->
            <button id="clearButton" onclick="limpiarColorFondo()"><i class="fas fa-trash-alt"></i>
                Tablero</button>

             
         

            <!-- SUBIR FONDOS DE PANTALLA -->
            <input type="file" id="fileInput" accept="image/*" multiple onchange="cargarImagenesDeFondo(event)">
            <button id="uploadButton" onclick="document.getElementById('fileInput').click()">
            <i class="fas fa-cloud-upload-alt"></i>
            </button>
            <button id="prevButton" onclick="navegarAnterior()">
            <i class="fas fa-arrow-left"></i>
            </button>
            <button id="nextButton" onclick="navegarSiguiente()">
            <i class="fas fa-arrow-right"></i> 
            </button>
            <button id="resetButton" onclick="resetearFondo()">
            <i class="fas fa-sync"></i>
            </button>

<!-- PDF -->
            <!-- Input para subir un documento PDF -->
            <input type="file" id="pdfInput" accept=".pdf" style="display: none;">

            <!-- Bot√≥n para abrir el input de subida de PDF -->
            <button onclick="abrirSubidaPDF()">
            <i class="fas fa-file-pdf"></i>
            </button>

            <!-- Ventana emergente para mostrar el PDF -->
            <div id="pdfViewer">
            <!-- T√≠tulo para arrastrar la ventana -->
            <div id="pdfViewerTitle">
                Arrastra para ajustar
            </div>
            <button onclick="cerrarPDF()">
                <i class="fas fa-times"></i> Cerrar
            </button>
            <iframe id="pdfFrame"></iframe>
            <!-- Esquina de ajuste -->
            <div id="resizeCorner"></div>
 <!-- FINAL PDF-->




</div>
 






</div>



  <!-- MEN√ö - PANEL DE CONTROL-->
    <button id="showPanelButton">‚ò∞</button>

    <div id="controlPanel">
        <input type="number" id="timerInput" placeholder="Tiempo (s)">
        <button id="startTimerButton"><i class="fas fa-clock"></i></button>
        <button id="resetTimerButton"><i class="fas fa-sync"></i></button>

        <div class="controls">
            <STrong><div id="timerDisplay" style="color: rgb(4, 73, 129);">Tiempo restante: <span
                        id="timerValue">0</span> segundos</div></STrong>

            <audio id="timerSound">
                <source src="sound.mp3" type="audio/mpeg">
                Tu navegador no soporta el elemento de audio.
            </audio>

            <br><br><br><br>
            <script src="script.js"></script>
            <div>
                <p id="randomStudentResult"></p>
                <textarea
                    id="studentNamesInput"
                    placeholder="Ingrese los nombres de los estudiantes uno por l√≠nea"
                ></textarea>
                <button id="addStudentsButton"><i class="fas fa-list-ul"></i></button>
                <button id="pickRandomStudentButton"><i class="fas fa-random"></i></button>
            </div>
        </div>
        <div id="textoContenedor">
            <p>PROGRAMA TRUEQUE AMBIENTAL LOS TUTORES</p>
            <div id="logoContainer">
                <img
                    src="https://www.fedusocial.org/LOGO%20PARTNERS%20SURVEY.png"
                    alt="Logotipo"
                >
            </div>
        </div>
      
        <br><br><br>
</body>




<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>


<!-- ::::::::::::::::::::::::::::::::: -->



<!-- ::::::::::::::::::::::::::::::::::::::::::: -->







<script>





// JS INICIO PARTE 1

// COLOR DE FONDO

function mostrarSelectorColor() {
    const colorSelector = document.getElementById('colorSelector');
    const colorInput = document.getElementById('colorInput');

    // Calcula las coordenadas para posicionar el colorInput al lado derecho del colorSelector
    const colorSelectorRect = colorSelector.getBoundingClientRect();
    const rightPosition = colorSelectorRect.right + window.scrollX + 10; // Ajusta seg√∫n sea necesario
    const topPosition = colorSelectorRect.top + window.scrollY;

    // Establece las coordenadas de posici√≥n para el colorInput
    colorInput.style.left = `${rightPosition}px`;
    colorInput.style.top = `${topPosition}px`;

    // Abre el selector de color
    colorInput.click();
}




  // Funci√≥n para cambiar el color de fondo del contenedor del lienzo
  function cambiarColorFondo(color) {
    document.getElementById('lienzoContainer').style.backgroundColor = color;
  }


  function limpiarColorFondo() {
    console.log("Limpiar color de fondo llamado");
    
    // Restaura el color de fondo a transparente
    document.getElementById("lienzoContainer").style.backgroundColor = "transparent";

    // Restaura la imagen de fondo (si tienes una)
    // Reemplaza 'URL_DE_TU_IMAGEN' con la URL de tu imagen de fondo
    document.getElementById("lienzoContainer").style.backgroundImage = "url('URL_DE_TU_IMAGEN')";

    // Otros c√≥digos adicionales que puedas necesitar

    // Borra el color seleccionado en el input de color
    document.getElementById("colorInput").value = "";
}






// CONTENEDOR √çCONO DEL L√ÅPIZ
// Funci√≥n para hacer que el contenedor sea arrastrable
$(function () {
    $(".draggable-container").draggable();
});



// Funci√≥n para mostrar/ocultar el men√∫
function toggleMenu() {
    $("#toolsMenu").toggle();
}



// Espera a que el DOM est√© completamente cargado
    $(document).ready(function () {
        // Selecciona el contenedor que deseas hacer arrastrable y llama a la funci√≥n draggable()
        $(".file-upload-container").draggable();
    });





// PANEL DE COMTROL
const showPanelButton = document.getElementById('showPanelButton');
const controlPanel = document.getElementById('controlPanel');

// Agrega un manejador de eventos al bot√≥n "Mostrar Panel"
showPanelButton.addEventListener('click', () => {
    if (controlPanel.style.display === 'none') {
        controlPanel.style.display = 'block'; // Muestra el panel de control
    } else {
        controlPanel.style.display = 'none'; // Oculta el panel de control
    }
});



const canvas = document.getElementById('whiteboard');
const ctx = canvas.getContext('2d');
const imageInput = document.getElementById('imageInput');
const previousButton = document.getElementById('previousButton');
const nextButton = document.getElementById('nextButton');
const clearButton = document.getElementById('clearButton');
const saveButton = document.getElementById('saveButton');
const undoButton = document.getElementById('undoButton');
const redoButton = document.getElementById('redoButton');
// Obt√©n referencias a los elementos relacionados con el cron√≥metro
const timerInput = document.getElementById('timerInput');
const startTimerButton = document.getElementById('startTimerButton');
const resetTimerButton = document.getElementById('resetTimerButton');
const timerDisplay = document.getElementById('timerDisplay');
const timerValue = document.getElementById('timerValue');





canvas.width = 1400; // Ancho del lienzo
canvas.height = 630; // Alto del lienzo

let imageLoaded = false;
let isDrawing = false;
let lastX = 0;
let lastY = 0;
let brushColor = '#ffffff'; // Color del pincel
let brushSize = 1; // Tama√±o del pincel
let drawingHistory = [];
let historyIndex = -1;
let currentImageIndex = -1;
let images = [];
let currentImage = new Image();
let timerInterval; // Variable para el intervalo del cron√≥metro
let remainingTime = 0; // Tiempo restante en segundos
let soundPlayed = false; // Bandera para controlar si se ha reproducido el sonido
let undoHistory = [];
let redoHistory = [];




// Funci√≥n para guardar el dibujo como imagen

saveButton.addEventListener('click', () => {
    saveDrawing();
});


function saveDrawing() {
    console.log("Guardando el dibujo"); // Agregar mensaje de depuraci√≥n
    const dataURL = canvas.toDataURL('image/png');
    const a = document.createElement('a');
    a.href = dataURL;
    a.download = 'drawing.png';
    a.click();
}







// Obt√©n la URL de la imagen dibujada en el lienzo
const dataURL = canvas.toDataURL('image/png');

    








// Funci√≥n para cargar una imagen
function loadNewImage(file) {
    if (file) {
        const reader = new FileReader();
        reader.onload = function (event) {
            currentImage.src = event.target.result;
            currentImage.onload = function () {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.drawImage(currentImage, 0, 0, canvas.width, canvas.height);
                imageLoaded = true;
            };
        };
        reader.readAsDataURL(file);
    }
}

// Funci√≥n para deshacer el √∫ltimo paso
clearButton.addEventListener('click', () => {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    drawingHistory = [];
    historyIndex = -1;
    imageLoaded = false;
    imageInput.value = ''; // Limpiar el input de carga de imagen
    images = []; // Limpiar la lista de im√°genes
    currentImageIndex = -1;
});



// Arrays para almacenar el historial de dibujo para Deshacer y Rehacer
const historialDeshacer = [];
const historialRehacer = [];

// Agrega un manejador de eventos al bot√≥n Deshacer
undoButton.addEventListener('click', () => {
    if (historialDeshacer.length > 0) {
        const ultimoEstado = historialDeshacer.pop();
        historialRehacer.push(ctx.getImageData(0, 0, canvas.width, canvas.height));
        ctx.putImageData(ultimoEstado, 0, 0);
    }
});

// Agrega un manejador de eventos al bot√≥n Rehacer
redoButton.addEventListener('click', () => {
    if (historialRehacer.length > 0) {
        const siguienteEstado = historialRehacer.pop();
        historialDeshacer.push(ctx.getImageData(0, 0, canvas.width, canvas.height));
        ctx.putImageData(siguienteEstado, 0, 0);
    }
});

// Funci√≥n para guardar el estado actual del lienzo para Deshacer
function guardarEstadoDeshacer() {
    historialDeshacer.push(ctx.getImageData(0, 0, canvas.width, canvas.height));
    // Borra el historial de Rehacer cuando se realiza un nuevo dibujo
    historialRehacer.length = 0;
}

// Conecta esta funci√≥n con tu l√≥gica de dibujo para guardar estados antes de cada cambio
canvas.addEventListener('mousemove', () => {
    if (isDrawing) {
        guardarEstadoDeshacer();
        // ... tu c√≥digo de dibujo aqu√≠ ...
    }
});



// Manejador de eventos para cargar im√°genes
imageInput.addEventListener('change', (e) => {
    images = Array.from(e.target.files);
    currentImageIndex = 0;
    loadNewImage(images[currentImageIndex]);
});


//-----------FUNCIONES DEL L√ÅPIZ --------------------------//


function drawLine(e) {
  if (!isDrawing) return;

  if (borradorActivo) {
    // Si el borrador est√° activo, utiliza la operaci√≥n 'destination-out'
    ctx.globalCompositeOperation = 'destination-out';
  } else {
    // Si no, utiliza la operaci√≥n 'source-over'
    ctx.globalCompositeOperation = 'source-over';
  }

  // Resto del c√≥digo de drawLine
  // ...

  // Almacena el trazo en el historial de deshacer
  undoHistory.push(ctx.getImageData(0, 0, canvas.width, canvas.height));

  // Restaura la operaci√≥n global a 'source-over'
  ctx.globalCompositeOperation = 'source-over';
}



    function stopDrawing() {
      isDrawing = false;
      canvas.removeEventListener('mousemove', drawLine);
    }


// Obt√©n referencias a los elementos HTML
const studentNamesInput = document.getElementById('studentNamesInput');
const addStudentsButton = document.getElementById('addStudentsButton');
const pickRandomStudentButton = document.getElementById('pickRandomStudentButton');
const randomStudentResult = document.getElementById('randomStudentResult');

// Arreglo para almacenar los nombres de los estudiantes
const studentNames = [];

// Agregar estudiantes al arreglo cuando se hace clic en el bot√≥n "Agregar Estudiantes"
addStudentsButton.addEventListener('click', () => {
    const inputText = studentNamesInput.value.trim();
    if (inputText !== '') {
        const newStudents = inputText.split('\n').map(name => name.trim());
        studentNames.push(...newStudents);
        studentNamesInput.value = ''; // Limpiar el √°rea de texto
    }
});



// Agregar un manejador de eventos para el clic del mouse (mousedown)
canvas.addEventListener('mousedown', (e) => {
    isDrawing = true;
    [lastX, lastY] = [e.clientX - canvas.getBoundingClientRect().left, e.clientY - canvas.getBoundingClientRect().top];
    ctx.beginPath();
    ctx.moveTo(lastX, lastY);
});

// Agregar un manejador de eventos para el movimiento del mouse (mousemove)
canvas.addEventListener('mousemove', (e) => {
    if (isDrawing) {
        const x = e.clientX - canvas.getBoundingClientRect().left;
        const y = e.clientY - canvas.getBoundingClientRect().top;
        ctx.strokeStyle = brushColor;
        ctx.lineWidth = brushSize;
        ctx.lineTo(x, y);
        ctx.stroke();
        [lastX, lastY] = [x, y];
    }
});

// Agregar un manejador de eventos para el final del dibujo (mouseup)
canvas.addEventListener('mouseup', () => {
    isDrawing = false;
    ctx.closePath();
    // Guardar el trazo actual en el historial
    const drawingData = ctx.getImageData(0, 0, canvas.width, canvas.height);
    drawingHistory.push(drawingData);
    historyIndex = drawingHistory.length - 1;
});

// Agregar un manejador de eventos para salir del √°rea de dibujo (mouseout)
canvas.addEventListener('mouseout', () => {
    isDrawing = false;
});


//--------------------------------------------------------------------------//

//-----------BORRAR DIBUJO--------------------------//
// Obt√©n referencia al bot√≥n "Borrar Trazos"
const clearDrawingButton = document.getElementById('clearDrawingButton');

// Agregar un manejador de eventos al bot√≥n "Borrar Trazos"
clearDrawingButton.addEventListener('click', clearDrawing);

// Funci√≥n para borrar los trazos del l√°piz sin afectar la imagen
function clearDrawing() {
    // Borrar los trazos del l√°piz
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    // Redraw la imagen actual si est√° cargada
    if (imageLoaded) {
        ctx.drawImage(currentImage, 0, 0, canvas.width, canvas.height);
    }
    
    // Restablecer el historial de dibujo
    drawingHistory = [];
    historyIndex = -1;
}

//-------------------------------------------------//



// Manejadores de eventos para la navegaci√≥n de im√°genes
previousButton.addEventListener('click', () => {
    if (currentImageIndex > 0) {
        currentImageIndex--;
        loadNewImage(images[currentImageIndex]);
    }
});

nextButton.addEventListener('click', () => {
    if (currentImageIndex < images.length - 1) {
        currentImageIndex++;
        loadNewImage(images[currentImageIndex]);
    }
});


// Obt√©n referencias a los elementos de color y tama√±o del pincel
const colorPicker = document.getElementById('colorPicker');
const brushSizeInput = document.getElementById('brushSizeInput');


function updateTimerDisplay() {
    timerValue.textContent = remainingTime;
}


startTimerButton.addEventListener('click', () => {
    const newTime = parseInt(timerInput.value);
    if (!isNaN(newTime) && newTime > 0) {
        clearInterval(timerInterval); // Detener el cron√≥metro anterior
        remainingTime = newTime;
        updateTimerDisplay();
        soundPlayed = false; // Restablecer soundPlayed a false al iniciar el cron√≥metro


// Iniciar el nuevo cron√≥metro
timerInterval = setInterval(() => {
            if (remainingTime > 0) {
                remainingTime--;
                updateTimerDisplay();
            } else {
                clearInterval(timerInterval);
            }
        }, 1000);
    }
});



resetTimerButton.addEventListener('click', () => {
    clearInterval(timerInterval);
    remainingTime = 0;
    timerInput.value = ''; // Limpiar el input de configuraci√≥n
    updateTimerDisplay();
});

// Llamar a updateTimerDisplay inicialmente para mostrar "0 segundos"
updateTimerDisplay();



// Funci√≥n para actualizar la visualizaci√≥n del cron√≥metro
function updateTimerDisplay() {
    timerValue.textContent = remainingTime;

    if (remainingTime === 0 && !soundPlayed) {
        // Reproducir el sonido cuando el cron√≥metro llega a cero
        const timerSound = document.getElementById('timerSound');
        timerSound.play();
        soundPlayed = true;
    }

    if (remainingTime < 0) {
        clearInterval(timerInterval);
        timerValue.textContent = '0';
    }
}



function loadNewImage(file) {
    if (file) {
        const fileType = file.type;
        if (fileType === 'image/jpeg' || fileType === 'image/png') {
            // Si es una imagen, carga como antes
            const reader = new FileReader();
            reader.onload = function (event) {
                currentImage.src = event.target.result;
                currentImage.onload = function () {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    ctx.drawImage(currentImage, 0, 0, canvas.width, canvas.height);
                    imageLoaded = true;
                };
            };
            reader.readAsDataURL(file);
        } else if (fileType === 'application/pdf') {
            // Si es un PDF, utiliza PDF.js para mostrarlo
            // Debes incluir PDF.js en tu proyecto
            const pdfUrl = URL.createObjectURL(file);
            PDFJS.getDocument(pdfUrl).promise.then(function (pdf) {
                pdf.getPage(1).then(function (page) {
                    const viewport = page.getViewport({ scale: 1 });
                    canvas.width = viewport.width;
                    canvas.height = viewport.height;

                    page.render({
                        canvasContext: ctx,
                        viewport: viewport,
                    });
                });
            });
        }
    }
}



// Funci√≥n para mostrar el selector de color al hacer clic en el √≠cono
function updateColor() {
      var colorPicker = document.getElementById("colorPicker");
      colorPicker.click(); // Abre el selector de color
    }


// JS FINAL DE LA PARTE 1







// JS  INICIO PARTE 2


// GROSOR DEL TRAZO ----------

// Agrega manejadores de eventos para cambios en el color y el tama√±o del pincel
colorPicker.addEventListener('input', (e) => {
    brushColor = e.target.value;
    ctx.strokeStyle = brushColor;
});

brushSizeInput.addEventListener('input', (e) => {
    brushSize = e.target.value;
    ctx.lineWidth = brushSize;
});


// ---------------- ----------


// Elegir un nombre al azar cuando se hace clic en el bot√≥n "Elegir un Nombre al Azar"
pickRandomStudentButton.addEventListener('click', () => {
    if (studentNames.length > 0) {
        const randomIndex = Math.floor(Math.random() * studentNames.length);
        const randomStudent = studentNames[randomIndex];
        randomStudentResult.textContent = `El estudiante seleccionado al azar es: ${randomStudent}`;
    } else {
        randomStudentResult.textContent = 'No hay estudiantes en la lista.';
    }
});

// Agregar un manejador de eventos al bot√≥n "Limpiar"
document.getElementById('clearButton').addEventListener('click', function () {
    // Limpia el lienzo de dibujo
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    drawingHistory = [];
    historyIndex = -1;
    imageLoaded = false;
    imageInput.value = '';
    images = [];
    currentImageIndex = -1;

    // Borra el estudiante elegido al azar
    document.getElementById('randomStudentResult').textContent = '';
});


    // PANTALLA COMPLETA

// Antes de cambiar a pantalla completa
function saveImageState() {
    // Guardar el estado actual de las im√°genes
    savedState = {
        images: images.slice(),  // Hacer una copia de la lista de im√°genes
        currentImageIndex: currentImageIndex
    };
}

// Despu√©s de salir de pantalla completa
function restoreImageState() {
    if (savedState) {
        // Restaurar el estado de las im√°genes
        images = savedState.images.slice();
        currentImageIndex = savedState.currentImageIndex;
        loadNewImage(images[currentImageIndex]);
    }
}

// Modifica la funci√≥n toggleFullScreen
function toggleFullScreen() {
    saveImageState();  // Guardar el estado antes de cambiar a pantalla completa

    const element = document.documentElement;

    if (document.fullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement) {
        if (document.exitFullscreen) {
            document.exitFullscreen();
        } else if (document.mozCancelFullScreen) {
            document.mozCancelFullScreen();
        } else if (document.webkitExitFullscreen) {
            document.webkitExitFullscreen();
        }
    } else {
        if (element.requestFullscreen) {
            element.requestFullscreen();
        } else if (element.mozRequestFullScreen) {
            element.mozRequestFullScreen();
        } else if (element.webkitRequestFullscreen) {
            element.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);
        }
    }
}

// Agrega un manejador de eventos al documento para detectar cambios en el estado de pantalla completa
document.addEventListener('fullscreenchange', () => {
    handleFullScreenChange();
    restoreImageState();  // Restaurar el estado despu√©s de salir de pantalla completa
});

document.addEventListener('mozfullscreenchange', () => {
    handleFullScreenChange();
    restoreImageState();
});

document.addEventListener('webkitfullscreenchange', () => {
    handleFullScreenChange();
    restoreImageState();
});


// TIMER TIMER TIMER TIMER TIMER

function startTimer() {
    const timerButton = document.getElementById('startTimer');
    const resetButton = document.getElementById('resetTimer');
    const pauseButton = document.getElementById('pauseTimer');
    const timerInput = document.getElementById('timerInput'); // campo del panel
    const timerDisplay = document.getElementById('timer');    // contenedor flotante azul
    const minutesDisplay = document.getElementById('minutes');
    const secondsDisplay = document.getElementById('seconds');
    const timerSound = document.getElementById('timerSound');

    let countdown;
    let remainingTime = 0;
    let isPaused = false;

    // Mostrar siempre el valor del input en el cron√≥metro flotante
    function updateDisplay() {
        const minutes = Math.floor(remainingTime / 60);
        const seconds = remainingTime % 60;
        minutesDisplay.textContent = minutes.toString().padStart(2, '0');
        secondsDisplay.textContent = seconds.toString().padStart(2, '0');
    }

    // Al hacer clic en el bot√≥n del reloj ‚è±Ô∏è
    timerButton.addEventListener('click', () => {
        const newTime = parseInt(timerInput.value);
        if (isNaN(newTime) || newTime <= 0) return;

        remainingTime = newTime;
        updateDisplay();
        timerDisplay.style.display = 'block'; // mostrar cron√≥metro flotante

        clearInterval(countdown);
        countdown = setInterval(() => {
            if (!isPaused && remainingTime > 0) {
                remainingTime--;
                updateDisplay();
            } else if (remainingTime <= 0) {
                clearInterval(countdown);
                updateDisplay();
                timerSound.play(); // sonido al finalizar
                alert('¬°Tiempo agotado!');
            }
        }, 1000);
    });

    // Bot√≥n de pausa ‚è∏Ô∏è
    pauseButton.addEventListener('click', () => {
        isPaused = !isPaused;
    });

    // Bot√≥n de reinicio üîÅ
    resetButton.addEventListener('click', () => {
        clearInterval(countdown);
        remainingTime = 0;
        updateDisplay();
        timerInput.value = '';
    });
}


window.onload = function () {
    startTimer();
};

// -----------FINAL DEL TIMER TIMER TIMER TIMER TIMER -----------------------



// ARRASTRAR TIMER
let isDragging = false;
let offsetX, offsetY;

const timer = document.getElementById("timer");

timer.addEventListener("mousedown", (e) => {
    isDragging = true;
    offsetX = e.clientX - timer.getBoundingClientRect().left;
    offsetY = e.clientY - timer.getBoundingClientRect().top;
    timer.style.cursor = "grabbing";
});

document.addEventListener("mousemove", (e) => {
    if (isDragging) {
        const x = e.clientX - offsetX;
        const y = e.clientY - offsetY;
        timer.style.left = x + "px";
        timer.style.top = y + "px";
    }
});

document.addEventListener("mouseup", () => {
    isDragging = false;
    timer.style.cursor = "grab";
});


$(document).ready(function () {
    $("#startTimer").click(function () {
        $("#timer").toggle(); // Alternar la visibilidad del temporizador al hacer clic en el bot√≥n
    });
});



// -----------FLECHAS IM√ÅGENES-----------------------


// Agrega un manejador de eventos para las teclas de flecha izquierda y derecha
document.addEventListener('keydown', (e) => {
    switch (e.key) {
        case 'ArrowLeft':
            navigateImage(-1); // Retroceder a la imagen anterior
            break;
        case 'ArrowRight':
            navigateImage(1); // Avanzar a la siguiente imagen
            break;
    }
});

// Funci√≥n para navegar entre im√°genes
function navigateImage(direction) {
    if (images.length > 1) {
        currentImageIndex += direction;
        if (currentImageIndex < 0) {
            currentImageIndex = images.length - 1;
        } else if (currentImageIndex >= images.length) {
            currentImageIndex = 0;
        }
        loadNewImage(images[currentImageIndex]);
    }
}



document.addEventListener("fullscreenchange", function () {
  ajustarDimensionesLienzo();
  ajustarPosicionBarraHerramientas();
});

document.addEventListener("webkitfullscreenchange", function () {
  ajustarDimensionesLienzo();
  ajustarPosicionBarraHerramientas();
});

document.addEventListener("mozfullscreenchange", function () {
  ajustarDimensionesLienzo();
  ajustarPosicionBarraHerramientas();
});

// Ajustar las dimensiones del lienzo al tama√±o de la pantalla
function ajustarDimensionesLienzo() {
  var canvas = document.getElementById("whiteboard");
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}

// Ajustar la posici√≥n de la barra de herramientas en pantalla completa
function ajustarPosicionBarraHerramientas() {
  var toolsMenu = document.getElementById("toolsMenu");

  if (
    document.fullscreenElement ||
    document.mozFullScreenElement ||
    document.webkitFullscreenElement
  ) {
    // Posicionar la barra de herramientas en la parte inferior durante la pantalla completa
    toolsMenu.style.bottom = "10px";
    toolsMenu.style.left = "10px";
  } else {
    // Restaurar la posici√≥n original de la barra de herramientas
    toolsMenu.style.bottom = ""; // Deja que el CSS maneje la posici√≥n
    toolsMenu.style.left = "";
  }
}

// Ajustar las dimensiones del lienzo al cargar la p√°gina
ajustarDimensionesLienzo();



// -----------BORRADOR-----------------------

const eraseButton = document.getElementById('eraseButton');
let isErasing = false;

eraseButton.addEventListener('click', () => {
    isErasing = !isErasing;
    if (isErasing) {
        eraseButton.classList.add('active');
        canvas.addEventListener('mousedown', eraseStart);
    } else {
        eraseButton.classList.remove('active');
        canvas.removeEventListener('mousedown', eraseStart);
    }
});

// Almacena los puntos de inicio y fin del trazo a borrar
let eraseStartX, eraseStartY;

function eraseStart(e) {
    eraseStartX = e.clientX - canvas.getBoundingClientRect().left;
    eraseStartY = e.clientY - canvas.getBoundingClientRect().top;
    canvas.addEventListener('mousemove', erase);
    canvas.addEventListener('mouseup', eraseEnd);
}

function erase(e) {
    const eraseEndX = e.clientX - canvas.getBoundingClientRect().left;
    const eraseEndY = e.clientY - canvas.getBoundingClientRect().top;

    ctx.globalCompositeOperation = 'destination-out'; // Establecer el modo de composici√≥n para borrar
    ctx.lineWidth = 10; // Establecer el ancho de l√≠nea del borrador

    ctx.beginPath();
    ctx.moveTo(eraseStartX, eraseStartY);
    ctx.lineTo(eraseEndX, eraseEndY);
    ctx.stroke();

    eraseStartX = eraseEndX;
    eraseStartY = eraseEndY;
}

function eraseEnd() {
    ctx.globalCompositeOperation = 'source-over'; // Restaurar el modo de composici√≥n original
    canvas.removeEventListener('mousemove', erase);
    canvas.removeEventListener('mouseup', eraseEnd);
}


function borrador() {
  // Cambia entre l√°piz y borrador al hacer clic en el bot√≥n de borrador
  borradorActivo = !borradorActivo;

  // Actualiza el cursor para reflejar el modo de borrado o dibujo
  canvas.style.cursor = borradorActivo ? 'url("borrador.png") 0 30, auto' : 'crosshair';

  // Restaura la operaci√≥n global a 'source-over' cuando se cambia a l√°piz
  if (!borradorActivo) {
    ctx.globalCompositeOperation = 'source-over';
  }
}

// FUNCI√ìN PARA SUBIR FONDOS DE PANTALLA

let imagenesDeFondo = [];
        let indiceImagenActual = 0;

        function cargarImagenesDeFondo(event) {
            const fileInput = event.target;
            imagenesDeFondo = [];

            for (const file of fileInput.files) {
                const reader = new FileReader();

                reader.onload = function (e) {
                    imagenesDeFondo.push(e.target.result);
                };

                reader.readAsDataURL(file);
            }

            mostrarImagenDeFondo();
        }

        function mostrarImagenDeFondo() {
            if (imagenesDeFondo.length > 0) {
                document.body.style.backgroundImage = `url('${imagenesDeFondo[indiceImagenActual]}')`;
            }
        }

        function navegarAnterior() {
            if (imagenesDeFondo.length > 0) {
                indiceImagenActual = (imagenesDeFondo.length + indiceImagenActual - 1) % imagenesDeFondo.length;
                mostrarImagenDeFondo();
            }
        }

        function navegarSiguiente() {
            if (imagenesDeFondo.length > 0) {
                indiceImagenActual = (indiceImagenActual + 1) % imagenesDeFondo.length;
                mostrarImagenDeFondo();
            }
        }


        function resetearFondo() {
            document.body.style.backgroundImage = '';
            diapositivas = [];
            indiceDiapositivaActual = 0;
        }


        function actualizarFondo() {
            if (diapositivas.length === 0) {
                // Fondo predeterminado cuando no hay diapositivas
                document.body.style.backgroundImage = 'url("fondo_predeterminado.jpg")';
            }
        }



        // Agrega la escucha de eventos del teclado
        document.addEventListener('keydown', function (event) {
            if (event.key === 'ArrowLeft') {
                navegarAnterior();
            } else if (event.key === 'ArrowRight') {
                navegarSiguiente();
            }
        });




// FUNCIONES PDF

// Variable para almacenar el estado del arrastre y ajuste

     // Variable para almacenar el estado del arrastre y ajuste
  
        let isResizing = false;

        // Variables para almacenar la posici√≥n inicial del arrastre y ajuste
        let initialMouseX, initialMouseY, initialWidth, initialHeight;

        // Funci√≥n para abrir el input de subida de PDF
        function abrirSubidaPDF() {
            document.getElementById('pdfInput').click();
        }

        // Funci√≥n para manejar la subida de PDF
        document.getElementById('pdfInput').addEventListener('change', function (event) {
            const file = event.target.files[0];
            if (file && file.type === 'application/pdf') {
                mostrarPDF(file);
            }
        });

        // Funci√≥n para mostrar el PDF en la ventana emergente
        function mostrarPDF(pdfFile) {
            const pdfViewer = document.getElementById('pdfViewer');
            const pdfFrame = document.getElementById('pdfFrame');

            pdfFrame.src = URL.createObjectURL(pdfFile);
            pdfViewer.style.display = 'block';

            // Iniciar escucha para eventos de arrastre y ajuste
            document.addEventListener('mousemove', handleDrag);
            document.addEventListener('mouseup', () => {
                isDragging = false;
                isResizing = false;
            });
        }

        // Funci√≥n para cerrar la ventana emergente del PDF
        function cerrarPDF() {
            const pdfViewer = document.getElementById('pdfViewer');
            const pdfFrame = document.getElementById('pdfFrame');

            pdfFrame.src = '';
            pdfViewer.style.display = 'none';

            // Detener la escucha para eventos de arrastre y ajuste
            document.removeEventListener('mousemove', handleDrag);
        }

        // Funci√≥n para manejar el arrastre y ajuste de la ventana
        function handleDrag(e) {
            if (isDragging) {
                const pdfViewer = document.getElementById('pdfViewer');
                pdfViewer.style.left = e.clientX - initialMouseX + 'px';
                pdfViewer.style.top = e.clientY - initialMouseY + 'px';
            }

            if (isResizing) {
                const pdfViewer = document.getElementById('pdfViewer');
                const newWidth = initialWidth + (e.clientX - initialMouseX);
                const newHeight = initialHeight + (e.clientY - initialMouseY);

                pdfViewer.style.width = newWidth + 'px';
                pdfViewer.style.height = newHeight + 'px';
            }
        }

        // Escucha para eventos de inicio de arrastre y ajuste
        document.getElementById('pdfViewerTitle').addEventListener('mousedown', (e) => {
            isDragging = true;
            initialMouseX = e.clientX - parseFloat(getComputedStyle(pdfViewer).left);
            initialMouseY = e.clientY - parseFloat(getComputedStyle(pdfViewer).top);
        });

        // Escucha para eventos de inicio de ajuste
        document.getElementById('resizeCorner').addEventListener('mousedown', (e) => {
            isResizing = true;
            initialMouseX = e.clientX;
            initialMouseY = e.clientY;
            initialWidth = pdfViewer.offsetWidth;
            initialHeight = pdfViewer.offsetHeight;
        });
 
// FINAL FUNCIONES PDF


// JS  FINAL PARTE 2

// ...




// ...




</script>



</body>
</html>
