<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Cuenta T - Debe y Haber</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f9fafb;
    padding: 20px;
    text-align: center;
  }
  h1 { color: #1d4ed8; }
  table {
    margin: 20px auto;
    border-collapse: collapse;
    width: 80%;
  }
  th, td {
    border: 1px solid #333;
    padding: 8px;
    text-align: center;
  }
  th {
    background: #1d4ed8;
    color: white;
  }
  .debe { background: #d1fae5; }
  .haber { background: #fee2e2; }
  input, select, button {
    margin: 8px;
    padding: 6px;
  }
  .acciones button {
    margin: 2px;
    padding: 4px 8px;
    font-size: 12px;
    cursor: pointer;
  }
  .editar { background: #fbbf24; border: none; }
  .eliminar { background: #ef4444; color: white; border: none; }
</style>
</head>
<body>

<h1>Cuenta T</h1>

<div>
  <input type="text" id="concepto" placeholder="Concepto">
  <input type="number" id="valor" placeholder="Valor">
  <select id="tipo">
    <option value="debe">Debe</option>
    <option value="haber">Haber</option>
  </select>
  <button onclick="agregar()">Agregar</button>
</div>

<table>
  <tr>
    <th>Debe</th>
    <th>Haber</th>
    <th>Acciones</th>
  </tr>
  <tbody id="tabla"></tbody>
  <tr>
    <td id="totalDebe" class="debe">0</td>
    <td id="totalHaber" class="haber">0</td>
    <td></td>
  </tr>
</table>

<h2 id="saldo"></h2>

<script>
let totalDebe = 0;
let totalHaber = 0;
let entradas = [];

function renderizarTabla() {
  const cuerpo = document.getElementById("tabla");
  cuerpo.innerHTML = "";
  totalDebe = 0;
  totalHaber = 0;

  entradas.forEach((e, i) => {
    let fila = document.createElement("tr");
    let celdaDebe = document.createElement("td");
    let celdaHaber = document.createElement("td");
    let celdaAcciones = document.createElement("td");
    celdaAcciones.classList.add("acciones");

    if (e.tipo === "debe") {
      celdaDebe.textContent = `${e.concepto}: ${e.valor}`;
      celdaHaber.textContent = "";
      totalDebe += e.valor;
    } else {
      celdaDebe.textContent = "";
      celdaHaber.textContent = `${e.concepto}: ${e.valor}`;
      totalHaber += e.valor;
    }

    // Botones de editar y eliminar
    let btnEditar = document.createElement("button");
    btnEditar.textContent = "Editar";
    btnEditar.classList.add("editar");
    btnEditar.onclick = () => editarEntrada(i);

    let btnEliminar = document.createElement("button");
    btnEliminar.textContent = "Eliminar";
    btnEliminar.classList.add("eliminar");
    btnEliminar.onclick = () => eliminarEntrada(i);

    celdaAcciones.appendChild(btnEditar);
    celdaAcciones.appendChild(btnEliminar);

    fila.appendChild(celdaDebe);
    fila.appendChild(celdaHaber);
    fila.appendChild(celdaAcciones);
    cuerpo.appendChild(fila);
  });

  document.getElementById("totalDebe").textContent = totalDebe;
  document.getElementById("totalHaber").textContent = totalHaber;

  let diferencia = totalDebe - totalHaber;
  document.getElementById("saldo").textContent =
    diferencia > 0 ? `Saldo Deudor: ${diferencia}` :
    diferencia < 0 ? `Saldo Acreedor: ${Math.abs(diferencia)}` :
    "Cuenta Balanceada";
}

function agregar() {
  let concepto = document.getElementById("concepto").value;
  let valor = parseFloat(document.getElementById("valor").value);
  let tipo = document.getElementById("tipo").value;

  if (!concepto || isNaN(valor)) {
    alert("Completa todos los campos");
    return;
  }

  entradas.push({ concepto, valor, tipo });
  renderizarTabla();

  document.getElementById("concepto").value = "";
  document.getElementById("valor").value = "";
}

function editarEntrada(i) {
  let entrada = entradas[i];
  document.getElementById("concepto").value = entrada.concepto;
  document.getElementById("valor").value = entrada.valor;
  document.getElementById("tipo").value = entrada.tipo;

  // Al guardar reemplaza la entrada editada
  entradas.splice(i, 1);
  renderizarTabla();
}

function eliminarEntrada(i) {
  if (confirm("Â¿Seguro que deseas eliminar esta entrada?")) {
    entradas.splice(i, 1);
    renderizarTabla();
  }
}
</script>

</body>
</html>
