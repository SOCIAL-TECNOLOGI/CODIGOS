<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Panel de Control de Respuestas</title>
  <style>
    body {
      font-family: 'Helvetica', 'Arial', sans-serif;
      background-color: #f4f4f4;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    .container {
      width: 90%;
      max-width: 600px;
      background-color: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      overflow-y: auto; /* Hacer el contenedor desplazable verticalmente */
      max-height: 80vh; /* Altura máxima del contenedor */
    }

    .question {
      margin-bottom: 20px;
    }

    .options {
      display: flex;
      flex-direction: column;
    }

    .option {
      margin-bottom: 10px;
    }

    label {
      display: block;
      margin-bottom: 5px;
    }

    button {
      background-color: #4caf50;
      color: #fff;
      border: none;
      padding: 8px 12px;
      font-size: 14px;
      cursor: pointer;
      border-radius: 5px;
      margin-top: 5px;
      display: flex;
      align-items: center;
    }

    button:hover {
      background-color: #45a049;
    }

    #result {
      margin-top: 20px;
      font-weight: bold;
    }

    #control-panel {
      margin-top: 40px;
    }

    h2 {
      color: #333;
    }

    ul {
      list-style-type: none;
      padding: 0;
    }

    li {
      margin-bottom: 10px;
    }

    ul li {
      margin-left: 20px;
      font-weight: normal;
    }

    p#total-responses {
      margin-top: 10px;
      font-weight: bold;
      color: #333;
    }

    .percentage-bar {
      display: flex;
      align-items: center;
      height: 20px;
      border-radius: 5px;
      overflow: hidden;
      background-color: #f0f0f0;
      margin-bottom: 5px;
    }

    .filler {
      height: 100%;
      background-color: #4caf50;
    }

    .option-percentage {
      padding-left: 10px;
      font-size: 14px;
      color: #333;
    }

    .names-list {
      display: none;
      list-style-type: none;
      margin: 0;
      padding: 0;
      max-height: 100px;
      overflow-y: auto; /* Hacer la lista de nombres desplazable verticalmente */
      border-radius: 5px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .names-list li {
      padding: 5px;
    }

    .names-list li:first-child {
      font-weight: bold;
    }
  </style>
</head>
<body>

<div class="container">
  <div class="question">
    <label for="studentName">Nombre del Estudiante:</label>
    <input type="text" id="studentName" placeholder="Ingrese su nombre">
    <p>Pregunta: ¿Cuál es la capital de Francia?</p>
    <div class="options">
      <div class="option" id="option-A">
        <label><input type="radio" name="answer" value="A"> A) Madrid</label>
      </div>
      <div class="option" id="option-B">
        <label><input type="radio" name="answer" value="B"> B) Berlín</label>
      </div>
      <div class="option" id="option-C">
        <label><input type="radio" name="answer" value="C"> C) París</label>
      </div>
      <div class="option" id="option-D">
        <label><input type="radio" name="answer" value="D"> D) Roma</label>
      </div>
    </div>
    <button onclick="checkAnswer()">Verificar Respuesta</button>
  </div>

  <div id="result"></div>

  <div id="control-panel">
    <h2>Panel de Control de Respuestas</h2>
    <ul id="responses-list"></ul>
    <p id="total-responses">Respuestas totales: 0</p>
  </div>
</div>

<script>
  var responses = {}; // Objeto para almacenar las respuestas de los estudiantes
  var totalStudents = 0; // Contador total de estudiantes que han respondido

  function checkAnswer() {
    var studentName = document.getElementById('studentName').value.trim();
    var selectedAnswer = document.querySelector('input[name="answer"]:checked');

    if (studentName === '') {
      alert('Por favor, ingrese su nombre.');
      return;
    }

    if (selectedAnswer) {
      var resultElement = document.getElementById('result');
      var userAnswer = selectedAnswer.value;
      var correctAnswer = 'C';

      resultElement.innerHTML = 'Hola, ' + studentName + '. Tu respuesta es: ' + userAnswer + '<br>';
      resultElement.innerHTML += 'La respuesta correcta es: ' + correctAnswer;

      // Almacenar la respuesta del estudiante en el objeto 'responses' junto con su nombre
      if (!responses[userAnswer]) {
        responses[userAnswer] = [];
      }
      responses[userAnswer].push(studentName);
      totalStudents++;
      updateControlPanel(); // Actualizar el panel de control
    } else {
      alert('Por favor, selecciona una respuesta.');
    }
  }

  function updateControlPanel() {
    var controlPanel = document.getElementById('responses-list');
    var totalResponsesElement = document.getElementById('total-responses');
    
    controlPanel.innerHTML = '';
    totalResponsesElement.textContent = 'Respuestas totales: ' + totalStudents;

    // Mostrar las respuestas de los estudiantes en el panel de control
    for (var option in { A: 0, B: 0, C: 0, D: 0 }) {
      var optionCount = responses[option] ? responses[option].length : 0;
      var percentage = (optionCount / totalStudents) * 100 || 0;

      controlPanel.innerHTML += '<li>Opción ' + option + ': ' + optionCount + ' respuestas (' + percentage.toFixed(2) + '%)</li>';
      if (responses[option]) {
        controlPanel.innerHTML += '<div class="percentage-bar"><div class="filler" style="width:' + percentage + '%;"></div></div>';
        controlPanel.innerHTML += '<button class="show-names-button" onclick="toggleNamesList(\'' + option + '\')">Mostrar Nombres</button>';
        controlPanel.innerHTML += '<ul class="names-list" id="names-list-' + option + '"></ul>';
      }
    }
  }

  function toggleNamesList(option) {
    var namesList = document.getElementById('names-list-' + option);
    var optionResponses = responses[option] || [];
    var button = namesList.previousElementSibling;

    if (namesList.style.display === 'none') {
      namesList.innerHTML = '';
      optionResponses.forEach(function(student) {
        namesList.innerHTML += '<li>' + student + '</li>';
      });
      namesList.style.display = 'block';
      button.textContent = 'Ocultar Nombres';
    } else {
      namesList.style.display = 'none';
      button.textContent = 'Mostrar Nombres';
    }
  }
</script>

</body>
</html>
